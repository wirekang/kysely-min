import{J as o}from"../sql-g_stMT-x.js";import{g as t}from"../json-object-args-8-CWqYyc.js";function jsonArrayFrom(t){return o`(select cast(coalesce(json_arrayagg(json_object(${o.join(getMysqlJsonObjectArgs(t.toOperationNode(),"agg"))})), '[]') as json) from ${t} as agg)`}function jsonObjectFrom(t){return o`(select json_object(${o.join(getMysqlJsonObjectArgs(t.toOperationNode(),"obj"))}) from ${t} as obj)`}function jsonBuildObject(t){return o`json_object(${o.join(Object.keys(t).flatMap((n=>[o.lit(n),t[n]])))})`}function getMysqlJsonObjectArgs(o,n){try{return t(o,n)}catch{throw new Error("MySQL jsonArrayFrom and jsonObjectFrom functions can only handle explicit selections due to limitations of the json_object function. selectAll() is not allowed in the subquery.")}}export{jsonArrayFrom,jsonBuildObject,jsonObjectFrom};
