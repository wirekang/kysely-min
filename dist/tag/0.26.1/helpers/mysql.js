import{H as n,aW as o,C as e,ap as t,I as a}from"../sql-MVzNZjAV.js";function s(o){return n`(select cast(coalesce(json_arrayagg(json_object(${n.join(r(o.toOperationNode(),"agg"))})), '[]') as json) from ${o} as agg)`}function i(o){return n`(select json_object(${n.join(r(o.toOperationNode(),"obj"))}) from ${o} as obj)`}function l(o){return n`json_object(${n.join(Object.keys(o).flatMap((e=>[n.lit(e),o[e]])))})`}function r(s,i){return s.selections.flatMap((({selection:s})=>{if(o.is(s)&&e.is(s.column))return[n.lit(s.column.column.name),n.id(i,s.column.column.name)];if(e.is(s))return[n.lit(s.column.name),n.id(i,s.column.name)];if(t.is(s)&&a.is(s.alias))return[n.lit(s.alias.name),n.id(i,s.alias.name)];throw new Error("MySQL jsonArrayFrom and jsonObjectFrom functions can only handle explicit selections due to limitations of the json_object function. selectAll() is not allowed in the subquery.")}))}export{s as jsonArrayFrom,l as jsonBuildObject,i as jsonObjectFrom};
